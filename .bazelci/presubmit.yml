---
buildifier: latest
tasks:
  linux_amd64_3.1.100:
    platform: ubuntu1804
    build_flags:
      - "--host_platform"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:linux_amd64_3.1.100"
      - "--platforms"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:linux_amd64_3.1.100"
    build_targets:
      - "//..."
    test_flags:
      - "--host_platform"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:linux_amd64_3.1.100"
      - "--platforms"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:linux_amd64_3.1.100"
    test_targets:
      - "//..."
    # run_flags:
    #   - "--host_platform @io_bazel_rules_dotnet//dotnet/toolchain:linux_amd64_3.1.100"
    #   - "--platforms @io_bazel_rules_dotnet//dotnet/toolchain:linux_amd64_3.1.100"
    # run_targets:
    #   - "//tests/examples/example_binary:hello.exe"
  darwin_amd64_3.1.100:
    platform: macos
    build_flags:
      - "--toolchain_resolution_debug"
      - "--host_platform"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:darwin_amd64_3.1.100"
      - "--platforms"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:darwin_amd64_3.1.100"
    build_targets:
      - "//..."
    test_flags:
      - "--host_platform"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:darwin_amd64_3.1.100"
      - "--platforms"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:darwin_amd64_3.1.100"
    test_targets:
      - "//..."
    # run_flags:
    #   - "--host_platform @io_bazel_rules_dotnet//dotnet/toolchain:darwin_amd64_3.1.100"
    #   - "--platforms @io_bazel_rules_dotnet//dotnet/toolchain:darwin_amd64_3.1.100"
    # run_targets:
    #   - "//tests/examples/example_binary:hello.exe"
  windows_amd64_3.1.100:
    platform: windows
    build_flags:
      - "--toolchain_resolution_debug"
      - "--host_platform"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:windows_amd64_3.1.100"
      - "--platforms"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:windows_amd64_3.1.100"
    build_targets:
      - "//..."
    test_flags:
      - "--host_platform"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:windows_amd64_3.1.100"
      - "--platforms"
      - "@io_bazel_rules_dotnet//dotnet/toolchain:windows_amd64_3.1.100"
    test_targets:
      - "//..."
    # run_flags:
    #   - "--host_platform @io_bazel_rules_dotnet//dotnet/toolchain:windows_amd64_3.1.100"
    #   - "--platforms @io_bazel_rules_dotnet//dotnet/toolchain:windows_amd64_3.1.100"
    # run_targets:
    #   - "//tests/examples/example_binary:hello.exe"

